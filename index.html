<!DOCTYPE html>
<html lang="da">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Body by Science Træning</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'SF Pro Display', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #1a2332 0%, #2d4a5c 100%);
            color: #ffffff;
            min-height: 100vh;
            overflow-x: hidden;
        }

        .container {
            max-width: 375px;
            margin: 0 auto;
            min-height: 100vh;
            position: relative;
            background: #1a2332;
        }

        .screen {
            display: none;
            animation: slideIn 0.3s ease-out;
            min-height: 100vh;
        }

        .screen.active {
            display: block;
        }

        @keyframes slideIn {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }

        /* Header Styles */
        .header {
            padding: 60px 24px 30px;
            background: linear-gradient(135deg, #2d4a5c 0%, #1a2332 100%);
            position: relative;
            overflow: hidden;
        }

        .header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><path d="M0,20 Q50,0 100,20 L100,80 Q50,100 0,80 Z" fill="rgba(156,252,60,0.1)"/></svg>');
            background-size: cover;
            opacity: 0.3;
        }

        .header-content {
            position: relative;
            z-index: 2;
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
        }

        .edit-memory-button {
            background: rgba(255, 255, 255, 0.1);
            border: none;
            border-radius: 12px;
            color: #ffffff;
            font-size: 14px;
            padding: 8px 12px;
            cursor: pointer;
            backdrop-filter: blur(10px);
            transition: all 0.3s ease;
            margin-top: 8px;
        }

        .edit-memory-button:hover {
            background: rgba(255, 255, 255, 0.15);
        }

        .greeting {
            font-size: 28px;
            font-weight: 700;
            margin-bottom: 8px;
        }

        .greeting .highlight {
            color: #9cfc3c;
        }

        .workout-stats {
            font-size: 14px;
            color: #b8c5d1;
            margin-bottom: 24px;
        }

        /* Progress Graph */
        .progress-section {
            margin: 24px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 16px;
            padding: 20px;
            backdrop-filter: blur(10px);
        }

        .progress-title {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 16px;
            color: #ffffff;
        }

        .graph-container {
            position: relative;
            height: 200px;
            background: rgba(255, 255, 255, 0.03);
            border-radius: 12px;
            overflow: hidden;
        }

        .graph-svg {
            width: 100%;
            height: 100%;
        }

        .graph-legend {
            display: flex;
            flex-wrap: wrap;
            gap: 12px;
            margin-top: 12px;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 6px;
            font-size: 12px;
            color: #b8c5d1;
        }

        .legend-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
        }

        /* Exercise List */
        .exercise-section {
            padding: 0 24px 100px;
        }

        .section-title {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 16px;
            color: #ffffff;
        }

        .exercise-item {
            background: rgba(255, 255, 255, 0.08);
            border-radius: 16px;
            padding: 16px;
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 16px;
            transition: all 0.3s ease;
            cursor: pointer;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .exercise-item:hover {
            background: rgba(255, 255, 255, 0.12);
            transform: translateY(-2px);
        }

        .exercise-icon {
            width: 48px;
            height: 48px;
            border-radius: 12px;
            background: linear-gradient(135deg, #9cfc3c, #3cfcfc);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            color: #1a2332;
            font-weight: 600;
        }

        .exercise-details {
            flex: 1;
        }

        .exercise-name {
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 4px;
            color: #ffffff;
        }

        .exercise-type {
            font-size: 12px;
            color: #9cfc3c;
            text-transform: uppercase;
            font-weight: 500;
        }

        .exercise-stats {
            text-align: right;
            font-size: 12px;
            color: #b8c5d1;
        }

        /* Start Button */
        .start-button {
            position: fixed;
            bottom: 24px;
            left: 24px;
            right: 24px;
            max-width: 327px;
            margin: 0 auto;
            background: linear-gradient(135deg, #9cfc3c, #3cfcfc);
            color: #1a2332;
            border: none;
            border-radius: 16px;
            padding: 18px;
            font-size: 16px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 8px 32px rgba(156, 252, 60, 0.3);
        }

        .start-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 12px 40px rgba(156, 252, 60, 0.4);
        }

        .start-button:active {
            transform: translateY(0);
        }

        /* Bottom Navigation */
        .bottom-nav {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: rgba(26, 35, 50, 0.95);
            backdrop-filter: blur(20px);
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            padding: 12px 0 30px;
            display: flex;
            justify-content: center;
            gap: 40px;
        }

        .nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 4px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .nav-item.active {
            color: #3cfcfc;
        }

        .nav-icon {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: currentColor;
            opacity: 0.8;
        }

        .nav-icon.active {
            background: #3cfcfc;
            opacity: 1;
        }

        /* Exercise Screen Styles */
        .exercise-header {
            position: relative;
            height: 300px;
            background: linear-gradient(135deg, #2d4a5c 0%, #1a2332 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
        }

        .exercise-header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: radial-gradient(circle at center, rgba(60, 252, 252, 0.2) 0%, rgba(156, 252, 60, 0.1) 50%, transparent 100%);
        }

        .back-button {
            position: absolute;
            top: 60px;
            left: 24px;
            width: 40px;
            height: 40px;
            background: rgba(255, 255, 255, 0.1);
            border: none;
            border-radius: 12px;
            color: #ffffff;
            font-size: 18px;
            cursor: pointer;
            backdrop-filter: blur(10px);
            z-index: 10;
        }

        .more-button {
            position: absolute;
            top: 60px;
            right: 24px;
            width: 40px;
            height: 40px;
            background: rgba(255, 255, 255, 0.1);
            border: none;
            border-radius: 12px;
            color: #ffffff;
            font-size: 18px;
            cursor: pointer;
            backdrop-filter: blur(10px);
        }

        .exercise-chart-button {
            width: 120px;
            height: 120px;
            background: linear-gradient(135deg, #3cfcfc, #9cfc3c);
            border: none;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 8px 32px rgba(60, 252, 252, 0.3);
            transition: all 0.3s ease;
            padding: 20px;
        }

        .exercise-chart-button:hover {
            transform: scale(1.05);
        }

        .mini-chart {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            overflow: hidden;
        }

        .chart-exercise-title {
            text-align: center;
            margin: 20px 24px 0;
            font-size: 18px;
            font-weight: 700;
            color: #9cfc3c;
            text-transform: uppercase;
        }

        .exercise-info {
            padding: 24px;
            padding-bottom: 100px;
            background: #1a2332;
        }

        .exercise-number {
            font-size: 12px;
            color: #9cfc3c;
            text-transform: uppercase;
            font-weight: 600;
            margin-bottom: 8px;
        }

        .exercise-title {
            font-size: 24px;
            font-weight: 700;
            margin-bottom: 16px;
            color: #ffffff;
        }

        .next-exercises {
            margin-top: 24px;
        }

        .next-title {
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 16px;
            color: #ffffff;
        }

        .remaining-count {
            font-size: 14px;
            color: #b8c5d1;
        }

        .next-exercise {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .next-exercise:last-child {
            border-bottom: none;
        }

        .next-exercise-icon {
            width: 40px;
            height: 40px;
            border-radius: 8px;
            background: rgba(255, 255, 255, 0.1);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 16px;
        }

        .next-exercise-details {
            flex: 1;
        }

        .next-exercise-name {
            font-size: 14px;
            font-weight: 600;
            color: #ffffff;
            margin-bottom: 2px;
        }

        .next-exercise-stats {
            font-size: 12px;
            color: #b8c5d1;
        }

        .next-exercise-arrow {
            color: #9cfc3c;
            font-size: 18px;
        }

        .begin-button {
            position: fixed;
            bottom: 24px;
            left: 24px;
            right: 24px;
            max-width: 327px;
            margin: 0 auto;
            background: #3cfcfc;
            color: #1a2332;
            border: none;
            border-radius: 16px;
            padding: 18px;
            font-size: 16px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        /* Weight Input Screen */
        .weight-input-screen {
            padding: 24px;
            padding-top: 80px;
        }

        .weight-input-container {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 16px;
            padding: 24px;
            margin-bottom: 24px;
        }

        .weight-label {
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 8px;
            color: #ffffff;
        }

        .last-weight {
            font-size: 14px;
            color: #b8c5d1;
            margin-bottom: 16px;
        }

        .weight-input {
            width: 100%;
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid rgba(255, 255, 255, 0.2);
            border-radius: 12px;
            padding: 16px;
            font-size: 24px;
            color: #ffffff;
            text-align: center;
            font-weight: 600;
        }

        .weight-input:focus {
            outline: none;
            border-color: #9cfc3c;
            box-shadow: 0 0 0 4px rgba(156, 252, 60, 0.2);
        }

        /* Timer Styles */
        .timer-screen {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            padding: 24px;
            text-align: center;
        }

        .timer-exercise-name {
            font-size: 20px;
            font-weight: 600;
            margin-bottom: 40px;
            color: #ffffff;
        }

        .timer-display {
            font-size: 72px;
            font-weight: 700;
            margin: 40px 0;
            background: linear-gradient(135deg, #9cfc3c, #3cfcfc);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .countdown-display {
            font-size: 64px;
            font-weight: 700;
            margin: 40px 0;
            color: #3cfcfc;
        }

        .timer-status {
            font-size: 16px;
            color: #b8c5d1;
            margin-bottom: 20px;
        }

        .stop-button {
            background: rgba(255, 255, 255, 0.1);
            color: #ffffff;
            border: 2px solid #9cfc3c;
            border-radius: 16px;
            padding: 16px 32px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .stop-button:hover {
            background: #9cfc3c;
            color: #1a2332;
        }

        /* Results Screen */
        .results-screen {
            padding: 24px;
            padding-top: 80px;
        }

        .results-title {
            font-size: 28px;
            font-weight: 700;
            text-align: center;
            margin-bottom: 32px;
            color: #ffffff;
        }

        .results-summary {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 16px;
            padding: 24px;
            margin-bottom: 24px;
        }

        .results-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .results-item:last-child {
            border-bottom: none;
        }

        .results-exercise {
            font-size: 16px;
            font-weight: 600;
            color: #ffffff;
        }

        .results-data {
            font-size: 14px;
            color: #9cfc3c;
            font-weight: 600;
        }

        .finish-button {
            background: linear-gradient(135deg, #9cfc3c, #3cfcfc);
            color: #1a2332;
            border: none;
            border-radius: 16px;
            padding: 18px;
            font-size: 16px;
            font-weight: 700;
            cursor: pointer;
            width: 100%;
            margin-top: 24px;
        }

        .hidden {
            display: none;
        }

        /* Edit Memory Screen */
        .edit-memory-screen {
            padding: 24px;
            padding-top: 80px;
        }

        .memory-section {
            margin-bottom: 32px;
        }

        .memory-section-title {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 16px;
            color: #ffffff;
        }

        .memory-item {
            background: rgba(255, 255, 255, 0.08);
            border-radius: 12px;
            padding: 16px;
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 12px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .memory-exercise {
            flex: 1;
        }

        .memory-exercise-name {
            font-size: 16px;
            font-weight: 600;
            color: #ffffff;
            margin-bottom: 4px;
        }

        .memory-stats {
            font-size: 14px;
            color: #9cfc3c;
        }

        .memory-date {
            font-size: 12px;
            color: #b8c5d1;
        }

        .delete-button {
            background: rgba(255, 69, 69, 0.2);
            border: 1px solid #ff4545;
            border-radius: 8px;
            color: #ff4545;
            padding: 8px 12px;
            font-size: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .delete-button:hover {
            background: #ff4545;
            color: #ffffff;
        }

        /* Add New Entry Form */
        .add-entry-form {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 16px;
            padding: 20px;
            margin-bottom: 24px;
        }

        .form-group {
            margin-bottom: 16px;
        }

        .form-label {
            font-size: 14px;
            font-weight: 600;
            color: #ffffff;
            margin-bottom: 8px;
            display: block;
        }

        .form-select,
        .form-input {
            width: 100%;
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            padding: 12px;
            font-size: 16px;
            color: #ffffff;
        }

        .form-select:focus,
        .form-input:focus {
            outline: none;
            border-color: #9cfc3c;
            box-shadow: 0 0 0 4px rgba(156, 252, 60, 0.2);
        }

        .form-row {
            display: flex;
            gap: 12px;
        }

        .form-row .form-group {
            flex: 1;
        }

        .add-entry-button {
            background: linear-gradient(135deg, #9cfc3c, #3cfcfc);
            color: #1a2332;
            border: none;
            border-radius: 12px;
            padding: 12px 24px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 100%;
        }

        .add-entry-button:hover {
            transform: translateY(-2px);
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Home Screen -->
        <div id="home" class="screen active">
            <div class="header">
                <div class="header-content">
                    <div>
                        <h1 class="greeting">Hey, <span class="highlight">Jonas!</span></h1>
                        <p class="workout-stats">Body By Science</p>
                    </div>
                    <button class="edit-memory-button" id="editMemoryBtn">Edit Memory</button>
                </div>
            </div>

            <div class="progress-section">
                <h3 class="progress-title">Progress Tracking</h3>
                <div class="graph-container">
                    <svg class="graph-svg" id="progressChart" viewBox="0 0 300 160">
                        <!-- Graph will be drawn here -->
                    </svg>
                </div>
                <div class="graph-legend" id="graphLegend">
                    <!-- Legend will be populated here -->
                </div>
            </div>

            <div class="exercise-section">
                <h3 class="section-title">Today's Exercises</h3>
                
                <div class="exercise-item" data-exercise="chest-press">
                    <div class="exercise-icon">CP</div>
                    <div class="exercise-details">
                        <div class="exercise-name">Chest Press</div>
                        <div class="exercise-type">Compound</div>
                    </div>
                    <div class="exercise-stats" id="chest-press-stats">No data</div>
                </div>

                <div class="exercise-item" data-exercise="pull-down">
                    <div class="exercise-icon">PD</div>
                    <div class="exercise-details">
                        <div class="exercise-name">Pull Down</div>
                        <div class="exercise-type">Compound</div>
                    </div>
                    <div class="exercise-stats" id="pull-down-stats">No data</div>
                </div>

                <div class="exercise-item" data-exercise="lateral-raise">
                    <div class="exercise-icon">LR</div>
                    <div class="exercise-details">
                        <div class="exercise-name">Lateral Raise</div>
                        <div class="exercise-type">Isolation</div>
                    </div>
                    <div class="exercise-stats" id="lateral-raise-stats">No data</div>
                </div>

                <div class="exercise-item" data-exercise="rear-delt">
                    <div class="exercise-icon">RD</div>
                    <div class="exercise-details">
                        <div class="exercise-name">Rear Delt</div>
                        <div class="exercise-type">Isolation</div>
                    </div>
                    <div class="exercise-stats" id="rear-delt-stats">No data</div>
                </div>

                <div class="exercise-item" data-exercise="bicep-curl">
                    <div class="exercise-icon">BC</div>
                    <div class="exercise-details">
                        <div class="exercise-name">Bicep Curl</div>
                        <div class="exercise-type">Isolation</div>
                    </div>
                    <div class="exercise-stats" id="bicep-curl-stats">No data</div>
                </div>

                <div class="exercise-item" data-exercise="leg-press">
                    <div class="exercise-icon">LP</div>
                    <div class="exercise-details">
                        <div class="exercise-name">Leg Press</div>
                        <div class="exercise-type">Compound</div>
                    </div>
                    <div class="exercise-stats" id="leg-press-stats">No data</div>
                </div>

                <div class="exercise-item" data-exercise="calf-raise">
                    <div class="exercise-icon">CR</div>
                    <div class="exercise-details">
                        <div class="exercise-name">Calf Raise</div>
                        <div class="exercise-type">Isolation</div>
                    </div>
                    <div class="exercise-stats" id="calf-raise-stats">No data</div>
                </div>
            </div>

            <button class="start-button" id="startWorkout">START WORKOUT</button>
        </div>

        <!-- Exercise Detail Screen -->
        <div id="exerciseDetail" class="screen">
            <div class="exercise-header">
                <button class="back-button" id="backBtn">←</button>
                <button class="more-button">⋯</button>
                <button class="exercise-chart-button" id="chartButton">
                    <svg class="mini-chart" id="exerciseMiniChart" viewBox="0 0 80 80">
                        <!-- Mini chart will be drawn here -->
                    </svg>
                </button>
            </div>

            <div class="chart-exercise-title" id="chartExerciseTitle">CHIN UP</div>

            <div class="exercise-info">
                <div class="exercise-number" id="exerciseNumber">EXERCISE 1.4</div>
                <h2 class="exercise-title" id="exerciseTitle">Target the Muscles of your Chest with Chest Press</h2>

                <div class="next-exercises">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px;">
                        <h3 class="next-title">Next Exercises</h3>
                        <span class="remaining-count" id="remainingCount">6 Remaining</span>
                    </div>

                    <div id="nextExercisesList">
                        <!-- Next exercises will be populated here -->
                    </div>
                </div>
            </div>

            <button class="begin-button" id="beginExercise">BEGIN EXERCISE</button>
        </div>

        <!-- Weight Input Screen -->
        <div id="weightInput" class="screen">
            <button class="back-button" id="backToDetail">←</button>
            
            <div class="weight-input-screen">
                <div class="weight-input-container">
                    <div class="weight-label">Indtast vægt for denne øvelse</div>
                    <div class="last-weight" id="lastWeightDisplay">Sidste træning: 65kg</div>
                    <input type="number" class="weight-input" id="weightValue" placeholder="0" />
                </div>
            </div>

            <button class="begin-button" id="startExerciseTimer">Start Øvelse</button>
        </div>

        <!-- Timer Screen -->
        <div id="timerScreen" class="screen">
            <div class="timer-screen">
                <h2 class="timer-exercise-name" id="timerExerciseName">Chest Press</h2>
                
                <div id="countdownPhase">
                    <div class="timer-status">Gør dig klar...</div>
                    <div class="countdown-display" id="countdownTimer">10</div>
                </div>

                <div id="workoutPhase" class="hidden">
                    <div class="timer-status">Time Under Tension</div>
                    <div class="timer-display" id="tutTimer">00:00</div>
                    <button class="stop-button" id="stopExercise">Stop Øvelse</button>
                </div>
            </div>
        </div>

        <!-- Results Screen -->
        <div id="resultsScreen" class="screen">
            <div class="results-screen">
                <h1 class="results-title">Træning Færdig!</h1>
                
                <div class="results-summary">
                    <div id="todaysResults"></div>
                </div>

                <button class="finish-button" id="finishWorkout">Tilbage til Hjem</button>
            </div>
        </div>

        <!-- Edit Memory Screen -->
        <div id="editMemoryScreen" class="screen">
            <button class="back-button" id="backToHome">←</button>
            
            <div class="edit-memory-screen">
                <div class="memory-section">
                    <h2 class="memory-section-title">Add New Entry</h2>
                    <div class="add-entry-form">
                        <div class="form-group">
                            <label class="form-label">Exercise</label>
                            <select class="form-select" id="exerciseSelect">
                                <option value="">Select Exercise</option>
                                <option value="chest-press">Chest Press</option>
                                <option value="pull-down">Pull Down</option>
                                <option value="lateral-raise">Lateral Raise</option>
                                <option value="rear-delt">Rear Delt</option>
                                <option value="bicep-curl">Bicep Curl</option>
                                <option value="leg-press">Leg Press</option>
                                <option value="calf-raise">Calf Raise</option>
                            </select>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label class="form-label">Weight (kg)</label>
                                <input type="number" class="form-input" id="newWeight" placeholder="0">
                            </div>
                            <div class="form-group">
                                <label class="form-label">TUT (seconds)</label>
                                <input type="number" class="form-input" id="newTut" placeholder="0">
                            </div>
                        </div>
                        <button class="add-entry-button" id="addEntryBtn">Add Entry</button>
                    </div>
                </div>

                <div class="memory-section">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px;">
                        <h2 class="memory-section-title" style="margin-bottom: 0;">Previous Entries</h2>
                        <button class="delete-button" id="clearAllBtn" style="background: rgba(255, 69, 69, 0.3); padding: 6px 12px;">Clear All Data</button>
                    </div>
                    <div id="memoryList">
                        <!-- Memory entries will be populated here -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        class WorkoutApp {
            constructor() {
                this.exercises = [
                    { id: 'chest-press', name: 'Chest Press', shortName: 'CP', lastWeight: null, lastTut: null, color: '#ff6b6b' },
                    { id: 'pull-down', name: 'Pull Down', shortName: 'PD', lastWeight: null, lastTut: null, color: '#4ecdc4' },
                    { id: 'lateral-raise', name: 'Lateral Raise', shortName: 'LR', lastWeight: null, lastTut: null, color: '#45b7d1' },
                    { id: 'rear-delt', name: 'Rear Delt', shortName: 'RD', lastWeight: null, lastTut: null, color: '#96ceb4' },
                    { id: 'bicep-curl', name: 'Bicep Curl', shortName: 'BC', lastWeight: null, lastTut: null, color: '#feca57' },
                    { id: 'leg-press', name: 'Leg Press', shortName: 'LP', lastWeight: null, lastTut: null, color: '#ff9ff3' },
                    { id: 'calf-raise', name: 'Calf Raise', shortName: 'CR', lastWeight: null, lastTut: null, color: '#54a0ff' }
                ];

                // Empty historical data - user must add their own entries
                this.historicalData = {
                    'chest-press': [],
                    'pull-down': [],
                    'lateral-raise': [],
                    'rear-delt': [],
                    'bicep-curl': [],
                    'leg-press': [],
                    'calf-raise': []
                };

                // Store previous workout tonnages
                this.workoutTonnageHistory = [];

                this.currentExerciseIndex = 0;
                this.workoutResults = [];
                this.countdownTimer = null;
                this.tutTimer = null;
                this.tutSeconds = 0;
                
                this.init();
            }

            init() {
                this.bindEvents();
                this.updateHomeExerciseStats();
                this.renderProgressChart();
            }

            bindEvents() {
                document.getElementById('startWorkout').addEventListener('click', () => this.startWorkout());
                document.getElementById('backBtn').addEventListener('click', () => this.goHome());
                document.getElementById('chartButton').addEventListener('click', () => this.showWeightInput());
                document.getElementById('beginExercise').addEventListener('click', () => this.showWeightInput());
                document.getElementById('backToDetail').addEventListener('click', () => this.showExerciseDetail());
                document.getElementById('startExerciseTimer').addEventListener('click', () => this.startExerciseTimer());
                document.getElementById('stopExercise').addEventListener('click', () => this.stopExercise());
                document.getElementById('finishWorkout').addEventListener('click', () => this.goHome());
                document.getElementById('editMemoryBtn').addEventListener('click', () => this.showEditMemory());
                document.getElementById('backToHome').addEventListener('click', () => this.goHome());
                document.getElementById('addEntryBtn').addEventListener('click', () => this.addNewEntry());
                document.getElementById('clearAllBtn').addEventListener('click', () => this.clearAllData());
            }

            renderProgressChart() {
                const svg = document.getElementById('progressChart');
                const legend = document.getElementById('graphLegend');
                
                // Clear existing content
                svg.innerHTML = '';
                legend.innerHTML = '';

                // Chart dimensions
                const width = 300;
                const height = 160;
                const margin = { top: 20, right: 20, bottom: 30, left: 40 };
                const chartWidth = width - margin.left - margin.right;
                const chartHeight = height - margin.top - margin.bottom;

                // Find data ranges
                let maxWeight = 0;
                let maxTut = 0;
                
                Object.values(this.historicalData).forEach(exerciseData => {
                    exerciseData.forEach(point => {
                        maxWeight = Math.max(maxWeight, point.weight);
                        maxTut = Math.max(maxTut, point.tut);
                    });
                });

                // Add some padding to the max values
                maxWeight = Math.ceil(maxWeight * 1.1);
                maxTut = Math.ceil(maxTut * 1.1);

                // Create scales
                const xScale = (tut) => margin.left + (tut / maxTut) * chartWidth;
                const yScale = (weight) => height - margin.bottom - (weight / maxWeight) * chartHeight;

                // Draw grid lines
                const gridGroup = document.createElementNS('http://www.w3.org/2000/svg', 'g');
                gridGroup.setAttribute('opacity', '0.1');
                
                // Vertical grid lines (TUT)
                for (let i = 0; i <= 5; i++) {
                    const x = margin.left + (i / 5) * chartWidth;
                    const line = document.createElementNS('http://www.w3.org/2000/svg', 'line');
                    line.setAttribute('x1', x);
                    line.setAttribute('y1', margin.top);
                    line.setAttribute('x2', x);
                    line.setAttribute('y2', height - margin.bottom);
                    line.setAttribute('stroke', '#ffffff');
                    gridGroup.appendChild(line);
                }

                // Horizontal grid lines (Weight)
                for (let i = 0; i <= 5; i++) {
                    const y = height - margin.bottom - (i / 5) * chartHeight;
                    const line = document.createElementNS('http://www.w3.org/2000/svg', 'line');
                    line.setAttribute('x1', margin.left);
                    line.setAttribute('y1', y);
                    line.setAttribute('x2', width - margin.right);
                    line.setAttribute('y2', y);
                    line.setAttribute('stroke', '#ffffff');
                    gridGroup.appendChild(line);
                }
                svg.appendChild(gridGroup);

                // Draw axes
                const axesGroup = document.createElementNS('http://www.w3.org/2000/svg', 'g');
                
                // X-axis
                const xAxis = document.createElementNS('http://www.w3.org/2000/svg', 'line');
                xAxis.setAttribute('x1', margin.left);
                xAxis.setAttribute('y1', height - margin.bottom);
                xAxis.setAttribute('x2', width - margin.right);
                xAxis.setAttribute('y2', height - margin.bottom);
                xAxis.setAttribute('stroke', '#ffffff');
                xAxis.setAttribute('stroke-width', '2');
                axesGroup.appendChild(xAxis);

                // Y-axis
                const yAxis = document.createElementNS('http://www.w3.org/2000/svg', 'line');
                yAxis.setAttribute('x1', margin.left);
                yAxis.setAttribute('y1', margin.top);
                yAxis.setAttribute('x2', margin.left);
                yAxis.setAttribute('y2', height - margin.bottom);
                yAxis.setAttribute('stroke', '#ffffff');
                yAxis.setAttribute('stroke-width', '2');
                axesGroup.appendChild(yAxis);

                // Axis labels
                const xLabel = document.createElementNS('http://www.w3.org/2000/svg', 'text');
                xLabel.setAttribute('x', width / 2);
                xLabel.setAttribute('y', height - 5);
                xLabel.setAttribute('text-anchor', 'middle');
                xLabel.setAttribute('fill', '#b8c5d1');
                xLabel.setAttribute('font-size', '12');
                xLabel.textContent = 'TUT (seconds)';
                axesGroup.appendChild(xLabel);

                const yLabel = document.createElementNS('http://www.w3.org/2000/svg', 'text');
                yLabel.setAttribute('x', 15);
                yLabel.setAttribute('y', height / 2);
                yLabel.setAttribute('text-anchor', 'middle');
                yLabel.setAttribute('fill', '#b8c5d1');
                yLabel.setAttribute('font-size', '12');
                yLabel.setAttribute('transform', `rotate(-90, 15, ${height / 2})`);
                yLabel.textContent = 'Weight (kg)';
                axesGroup.appendChild(yLabel);

                svg.appendChild(axesGroup);

                // Draw exercise data
                this.exercises.forEach((exercise, exerciseIndex) => {
                    const exerciseData = this.historicalData[exercise.id];
                    if (!exerciseData || exerciseData.length === 0) return;

                    // Create group for this exercise
                    const exerciseGroup = document.createElementNS('http://www.w3.org/2000/svg', 'g');

                    // Draw line connecting points
                    if (exerciseData.length > 1) {
                        const pathData = exerciseData.map((point, index) => {
                            const x = xScale(point.tut);
                            const y = yScale(point.weight === 'BW' ? 0 : point.weight);
                            return `${index === 0 ? 'M' : 'L'} ${x} ${y}`;
                        }).join(' ');

                        const path = document.createElementNS('http://www.w3.org/2000/svg', 'path');
                        path.setAttribute('d', pathData);
                        path.setAttribute('stroke', exercise.color);
                        path.setAttribute('stroke-width', '2');
                        path.setAttribute('fill', 'none');
                        path.setAttribute('opacity', '0.8');
                        exerciseGroup.appendChild(path);
                    }

                    // Draw data points
                    exerciseData.forEach((point, pointIndex) => {
                        const x = xScale(point.tut);
                        const y = yScale(point.weight === 'BW' ? 0 : point.weight);

                        const circle = document.createElementNS('http://www.w3.org/2000/svg', 'circle');
                        circle.setAttribute('cx', x);
                        circle.setAttribute('cy', y);
                        circle.setAttribute('r', '4');
                        circle.setAttribute('fill', exercise.color);
                        circle.setAttribute('stroke', '#ffffff');
                        circle.setAttribute('stroke-width', '1');
                        exerciseGroup.appendChild(circle);
                    });

                    svg.appendChild(exerciseGroup);

                    // Add to legend
                    const legendItem = document.createElement('div');
                    legendItem.className = 'legend-item';
                    legendItem.innerHTML = `
                        <div class="legend-dot" style="background-color: ${exercise.color}"></div>
                        <span>${exercise.shortName}</span>
                    `;
                    legend.appendChild(legendItem);
                });
            }

            showScreen(screenId) {
                document.querySelectorAll('.screen').forEach(screen => {
                    screen.classList.remove('active');
                });
                document.getElementById(screenId).classList.add('active');
            }

            startWorkout() {
                this.currentExerciseIndex = 0;
                this.workoutResults = [];
                this.showExerciseDetail();
            }

            showExerciseDetail() {
                const exercise = this.exercises[this.currentExerciseIndex];
                
                document.getElementById('exerciseNumber').textContent = `EXERCISE ${this.currentExerciseIndex + 1}.${this.exercises.length}`;
                if (exercise.lastWeight !== null && exercise.lastTut !== null) {
                    document.getElementById('exerciseTitle').innerHTML = `Last Set: ${exercise.lastWeight === 'BW' ? 'Bodyweight' : exercise.lastWeight + 'kg'}<br>TUT: ${exercise.lastTut} seconds`;
                } else {
                    document.getElementById('exerciseTitle').innerHTML = `No previous data<br>Start your first set!`;
                }
                document.getElementById('remainingCount').textContent = `${this.exercises.length - this.currentExerciseIndex - 1} Remaining`;
                document.getElementById('chartExerciseTitle').textContent = exercise.name.toUpperCase();

                // Render mini chart for current exercise
                this.renderExerciseMiniChart(exercise);

                // Populate next exercises
                const nextList = document.getElementById('nextExercisesList');
                nextList.innerHTML = '';
                
                const nextExercises = this.exercises.slice(this.currentExerciseIndex + 1, this.currentExerciseIndex + 2);
                nextExercises.forEach(nextEx => {
                    const nextItem = document.createElement('div');
                    nextItem.className = 'next-exercise';
                    nextItem.innerHTML = `
                        <div class="next-exercise-icon">${nextEx.shortName}</div>
                        <div class="next-exercise-details">
                            <div class="next-exercise-name">${nextEx.name}</div>
                            <div class="next-exercise-stats">${nextEx.lastWeight}kg • ${nextEx.lastTut} TUT</div>
                        </div>
                        <div class="next-exercise-arrow">→</div>
                    `;
                    nextList.appendChild(nextItem);
                });

                this.showScreen('exerciseDetail');
            }

            renderExerciseMiniChart(exercise) {
                const svg = document.getElementById('exerciseMiniChart');
                svg.innerHTML = '';

                const exerciseData = this.historicalData[exercise.id];
                if (!exerciseData || exerciseData.length === 0) return;

                // Chart dimensions for mini chart
                const size = 80;
                const margin = 10;
                const chartSize = size - (margin * 2);

                // Find data ranges for this exercise only
                let maxWeight = Math.max(...exerciseData.map(d => d.weight === 'BW' ? 0 : d.weight));
                let minWeight = Math.min(...exerciseData.map(d => d.weight === 'BW' ? 0 : d.weight));
                let maxTut = Math.max(...exerciseData.map(d => d.tut));
                let minTut = Math.min(...exerciseData.map(d => d.tut));

                // Add some padding
                const weightRange = maxWeight - minWeight || 10;
                const tutRange = maxTut - minTut || 10;
                maxWeight += weightRange * 0.1;
                minWeight -= weightRange * 0.1;
                maxTut += tutRange * 0.1;
                minTut -= tutRange * 0.1;

                // Create scales for mini chart
                const xScale = (tut) => margin + ((tut - minTut) / (maxTut - minTut)) * chartSize;
                const yScale = (weight) => size - margin - ((weight - minWeight) / (maxWeight - minWeight)) * chartSize;

                // Draw connection lines
                if (exerciseData.length > 1) {
                    const pathData = exerciseData.map((point, index) => {
                        const x = xScale(point.tut);
                        const y = yScale(point.weight === 'BW' ? 0 : point.weight);
                        return `${index === 0 ? 'M' : 'L'} ${x} ${y}`;
                    }).join(' ');

                    const path = document.createElementNS('http://www.w3.org/2000/svg', 'path');
                    path.setAttribute('d', pathData);
                    path.setAttribute('stroke', '#1a2332');
                    path.setAttribute('stroke-width', '2');
                    path.setAttribute('fill', 'none');
                    path.setAttribute('opacity', '0.8');
                    svg.appendChild(path);
                }

                // Draw data points
                exerciseData.forEach((point, pointIndex) => {
                    const x = xScale(point.tut);
                    const y = yScale(point.weight === 'BW' ? 0 : point.weight);

                    const circle = document.createElementNS('http://www.w3.org/2000/svg', 'circle');
                    circle.setAttribute('cx', x);
                    circle.setAttribute('cy', y);
                    circle.setAttribute('r', pointIndex === exerciseData.length - 1 ? '4' : '3');
                    circle.setAttribute('fill', '#1a2332');
                    circle.setAttribute('stroke', pointIndex === exerciseData.length - 1 ? '#ffffff' : 'none');
                    circle.setAttribute('stroke-width', '1');
                    svg.appendChild(circle);
                });
            }

            showWeightInput() {
                const exercise = this.exercises[this.currentExerciseIndex];
                if (exercise.lastWeight !== null) {
                    document.getElementById('lastWeightDisplay').textContent = `Sidste træning: ${exercise.lastWeight}kg`;
                } else {
                    document.getElementById('lastWeightDisplay').textContent = `Første gang - ingen tidligere data`;
                }
                document.getElementById('weightValue').value = '';
                this.showScreen('weightInput');
            }

            startExerciseTimer() {
                const weight = document.getElementById('weightValue').value;
                if (!weight) {
                    alert('Indtast venligst vægt');
                    return;
                }

                const exercise = this.exercises[this.currentExerciseIndex];
                document.getElementById('timerExerciseName').textContent = exercise.name;
                
                this.showScreen('timerScreen');
                this.startCountdown();
            }

            startCountdown() {
                document.getElementById('countdownPhase').classList.remove('hidden');
                document.getElementById('workoutPhase').classList.add('hidden');
                
                let countdown = 10;
                document.getElementById('countdownTimer').textContent = countdown;
                
                this.countdownTimer = setInterval(() => {
                    countdown--;
                    document.getElementById('countdownTimer').textContent = countdown;
                    
                    if (countdown <= 0) {
                        clearInterval(this.countdownTimer);
                        this.startTutTimer();
                    }
                }, 1000);
            }

            startTutTimer() {
                document.getElementById('countdownPhase').classList.add('hidden');
                document.getElementById('workoutPhase').classList.remove('hidden');
                
                this.tutSeconds = 0;
                this.tutStartTime = Date.now();
                this.updateTutDisplay();
                
                this.tutTimer = setInterval(() => {
                    this.tutSeconds = Math.floor((Date.now() - this.tutStartTime) / 1000);
                    this.updateTutDisplay();
                }, 100);
            }

            updateTutDisplay() {
                const minutes = Math.floor(this.tutSeconds / 60);
                const seconds = this.tutSeconds % 60;
                document.getElementById('tutTimer').textContent = 
                    `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
            }

            stopExercise() {
                clearInterval(this.tutTimer);
                
                const weight = document.getElementById('weightValue').value;
                const exercise = this.exercises[this.currentExerciseIndex];
                
                this.workoutResults.push({
                    name: exercise.name,
                    weight: weight,
                    tut: this.tutSeconds
                });

                this.currentExerciseIndex++;
                
                if (this.currentExerciseIndex < this.exercises.length) {
                    this.showExerciseDetail();
                } else {
                    this.showResults();
                }
            }

            showResults() {
                const resultsContainer = document.getElementById('todaysResults');
                resultsContainer.innerHTML = '';
                
                let totalTonnage = 0;
                
                this.workoutResults.forEach(result => {
                    const tonnage = parseFloat(result.weight) * result.tut;
                    totalTonnage += tonnage;
                    
                    const resultItem = document.createElement('div');
                    resultItem.className = 'results-item';
                    resultItem.innerHTML = `
                        <div class="results-exercise">${result.name}</div>
                        <div class="results-data">${result.weight}kg • ${result.tut}s</div>
                    `;
                    resultsContainer.appendChild(resultItem);
                });
                
                // Get last workout tonnage
                const lastTonnage = this.workoutTonnageHistory.length > 0 
                    ? this.workoutTonnageHistory[this.workoutTonnageHistory.length - 1] 
                    : 0;
                
                // Calculate improvement
                const improvement = lastTonnage > 0 ? totalTonnage - lastTonnage : 0;
                const improvementPercent = lastTonnage > 0 ? ((improvement / lastTonnage) * 100) : 0;
                
                // Add total tonnage with comparison
                const tonnageItem = document.createElement('div');
                tonnageItem.className = 'results-item';
                tonnageItem.style.borderTop = '2px solid #9cfc3c';
                tonnageItem.style.paddingTop = '16px';
                tonnageItem.style.marginTop = '12px';
                tonnageItem.innerHTML = `
                    <div class="results-exercise" style="font-weight: 700; color: #9cfc3c;">
                        Total Tonnage
                        ${lastTonnage > 0 ? `<div style="font-size: 12px; font-weight: 400; color: #b8c5d1; margin-top: 4px;">Last: ${lastTonnage.toFixed(0)} kg•s</div>` : ''}
                    </div>
                    <div class="results-data" style="font-weight: 700; color: #9cfc3c;">
                        ${totalTonnage.toFixed(0)} kg•s
                        ${improvement !== 0 ? `<div style="font-size: 12px; font-weight: 400; color: ${improvement > 0 ? '#3cfcfc' : '#ff4545'}; margin-top: 4px;">${improvement > 0 ? '+' : ''}${improvement.toFixed(0)} (${improvementPercent.toFixed(1)}%)</div>` : ''}
                    </div>
                `;
                resultsContainer.appendChild(tonnageItem);
                
                // Store this workout's tonnage for next time
                this.workoutTonnageHistory.push(totalTonnage);
                
                this.showScreen('resultsScreen');
            }

            goHome() {
                this.showScreen('home');
                this.updateHomeExerciseStats();
                this.renderProgressChart(); // Re-render chart when returning home
            }

            updateHomeExerciseStats() {
                this.exercises.forEach(exercise => {
                    const statsElement = document.getElementById(`${exercise.id}-stats`);
                    if (exercise.lastWeight !== null && exercise.lastTut !== null) {
                        statsElement.textContent = `${exercise.lastWeight}kg • ${exercise.lastTut}s`;
                    } else {
                        statsElement.textContent = 'No data';
                    }
                });
            }

            showEditMemory() {
                this.renderMemoryList();
                this.showScreen('editMemoryScreen');
            }

            renderMemoryList() {
                const memoryList = document.getElementById('memoryList');
                memoryList.innerHTML = '';

                // Group entries by exercise
                this.exercises.forEach(exercise => {
                    const exerciseData = this.historicalData[exercise.id];
                    if (!exerciseData || exerciseData.length === 0) return;

                    exerciseData.forEach((entry, index) => {
                        const memoryItem = document.createElement('div');
                        memoryItem.className = 'memory-item';
                        
                        // Create a mock date for display (in real app this would be stored)
                        const date = new Date();
                        date.setDate(date.getDate() - (exerciseData.length - index - 1) * 3);
                        
                        memoryItem.innerHTML = `
                            <div class="memory-exercise">
                                <div class="memory-exercise-name">${exercise.name}</div>
                                <div class="memory-stats">${entry.weight === 0 ? 'BW' : entry.weight + 'kg'} • ${entry.tut}s TUT</div>
                                <div class="memory-date">${date.toLocaleDateString('da-DK')}</div>
                            </div>
                            <button class="delete-button" data-exercise-id="${exercise.id}" data-entry-index="${index}">Delete</button>
                        `;
                        
                        // Add event listener for delete button
                        const deleteButton = memoryItem.querySelector('.delete-button');
                        deleteButton.addEventListener('click', () => {
                            this.deleteEntry(exercise.id, index);
                        });
                        memoryList.appendChild(memoryItem);
                    });
                });
            }

            addNewEntry() {
                const exerciseId = document.getElementById('exerciseSelect').value;
                const weight = parseFloat(document.getElementById('newWeight').value);
                const tut = parseInt(document.getElementById('newTut').value);

                if (!exerciseId || isNaN(weight) || isNaN(tut)) {
                    alert('Please fill in all fields with valid values');
                    return;
                }

                // Add the new entry to historical data
                if (!this.historicalData[exerciseId]) {
                    this.historicalData[exerciseId] = [];
                }
                
                this.historicalData[exerciseId].push({ weight, tut });

                // Update the exercise's last values
                const exercise = this.exercises.find(ex => ex.id === exerciseId);
                if (exercise) {
                    exercise.lastWeight = weight;
                    exercise.lastTut = tut;
                }

                // Clear form
                document.getElementById('exerciseSelect').value = '';
                document.getElementById('newWeight').value = '';
                document.getElementById('newTut').value = '';

                // Re-render memory list
                this.renderMemoryList();
                
                // Update home screen stats
                this.updateHomeExerciseStats();

                alert('Entry added successfully!');
            }

            deleteEntry(exerciseId, entryIndex) {
                if (confirm('Are you sure you want to delete this entry?')) {
                    this.historicalData[exerciseId].splice(entryIndex, 1);
                    
                    // If this was the last entry, update the exercise's last values
                    const exercise = this.exercises.find(ex => ex.id === exerciseId);
                    const remainingData = this.historicalData[exerciseId];
                    
                    if (exercise && remainingData.length > 0) {
                        const lastEntry = remainingData[remainingData.length - 1];
                        exercise.lastWeight = lastEntry.weight;
                        exercise.lastTut = lastEntry.tut;
                    }
                    
                    this.renderMemoryList();
                    this.updateHomeExerciseStats();
                }
            }

            clearAllData() {
                if (confirm('Are you sure you want to clear ALL historical data? This cannot be undone.')) {
                    // Clear all historical data
                    Object.keys(this.historicalData).forEach(exerciseId => {
                        this.historicalData[exerciseId] = [];
                    });
                    
                    // Reset all exercises to no data
                    this.exercises.forEach(exercise => {
                        exercise.lastWeight = null;
                        exercise.lastTut = null;
                    });
                    
                    // Clear workout tonnage history
                    this.workoutTonnageHistory = [];
                    
                    this.renderMemoryList();
                    this.updateHomeExerciseStats();
                    alert('All data cleared successfully!');
                }
            }
        }

        // Initialize the app
        const app = new WorkoutApp();
    </script>
</body>
</html>